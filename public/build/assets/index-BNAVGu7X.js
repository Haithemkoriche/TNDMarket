import{_ as te}from"./AppTextarea-DbTzv2XX.js";import{V as le,_ as oe}from"./VForm-Div2171k.js";import{a6 as ie,a8 as se,a9 as R,aU as ne,r as b,aV as re,L as E,aa as ue,ab as de,aW as ce,b as e,p as W,F as J,aC as me,aX as pe,$ as g,aY as ve,aT as fe,ad as O,D as Ve,f as X,o as I,e as a,a3 as v,s as y,t as _e,a2 as ye,c as ke,h as he}from"./main-BaaxU7u_.js";import{a as k}from"./axios-DGDcxXwr.js";import{V as N,b as j}from"./VCard-qOwQnKaN.js";import{V as L}from"./VCardText-DHqodwx9.js";import{V as be,a as ge}from"./VDataTable--edFkA1N.js";import{m as Ce,u as we,V as Y}from"./VTextField-DX4T_R8n.js";import{m as Ae,V as q}from"./VSelectionControl-cya76OLo.js";import{a as h,V as G}from"./VRow-DWkoVhRZ.js";import{V as Te}from"./VDialog-DkWi3ux5.js";import"./forwardRefs-DWGaNmQL.js";import"./VImg-CsLNaE2M.js";import"./VAvatar-fH7oXIj0.js";import"./VList-BMN_Y16l.js";import"./VDivider-UFgmqBFa.js";import"./VOverlay-5QeYpmUP.js";import"./scopeId-BisKJNJb.js";import"./VMenu-62ETFCUt.js";import"./VCheckboxBtn-ChYJ_Ojh.js";import"./VChip-CcYLCn_t.js";/* empty css              */const Fe=ie({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Ce(),...Ae()},"VSwitch"),H=se()({name:"VSwitch",inheritAttrs:!1,props:Fe(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,C){let{attrs:f,slots:n}=C;const o=R(t,"indeterminate"),u=R(t,"modelValue"),{loaderClasses:T}=ne(t),{isFocused:F,focus:V,blur:x}=we(t),w=b(),A=re&&window.matchMedia("(forced-colors: active)").matches,S=E(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),U=ue(),$=E(()=>t.id||`switch-${U}`);function B(){o.value&&(o.value=!1)}function s(i){var d,p;i.stopPropagation(),i.preventDefault(),(p=(d=w.value)==null?void 0:d.input)==null||p.click()}return de(()=>{const[i,d]=ce(f),p=Y.filterProps(t),l=q.filterProps(t);return e(Y,W({class:["v-switch",{"v-switch--flat":t.flat},{"v-switch--inset":t.inset},{"v-switch--indeterminate":o.value},T.value,t.class]},i,p,{modelValue:u.value,"onUpdate:modelValue":r=>u.value=r,id:$.value,focused:F.value,style:t.style}),{...n,default:r=>{let{id:c,messagesId:K,isDisabled:Q,isReadonly:Z,isValid:M}=r;const D={model:u,isValid:M};return e(q,W({ref:w},l,{modelValue:u.value,"onUpdate:modelValue":[_=>u.value=_,B],id:c.value,"aria-describedby":K.value,type:"checkbox","aria-checked":o.value?"mixed":void 0,disabled:Q.value,readonly:Z.value,onFocus:V,onBlur:x},d),{...n,default:_=>{let{backgroundColorClasses:P,backgroundColorStyles:m}=_;return e("div",{class:["v-switch__track",A?void 0:P.value],style:m.value,onClick:s},[n["track-true"]&&e("div",{key:"prepend",class:"v-switch__track-true"},[n["track-true"](D)]),n["track-false"]&&e("div",{key:"append",class:"v-switch__track-false"},[n["track-false"](D)])])},input:_=>{let{inputNode:P,icon:m,backgroundColorClasses:ee,backgroundColorStyles:ae}=_;return e(J,null,[P,e("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":m||t.loading},t.inset||A?void 0:ee.value],style:t.inset?void 0:ae.value},[n.thumb?e(me,{defaults:{VIcon:{icon:m,size:"x-small"}}},{default:()=>[n.thumb({...D,icon:m})]}):e(pe,null,{default:()=>[t.loading?e(ve,{name:"v-switch",active:!0,color:M.value===!1?void 0:S.value},{default:z=>n.loader?n.loader(z):e(fe,{active:z.isActive,color:z.color,indeterminate:!0,size:"16",width:"2"},null)}):m&&e(g,{key:String(m),icon:m,size:"x-small"},null)]})])])}})}})}),{}}}),Je={__name:"index",setup(t){const C=b([]),f=b(!1),n=b(!1),o=b({name:"",description:"",fields:[],is_active:!0}),u=O("accessToken").value,T=[{title:"Text",value:"text"},{title:"Number",value:"number"},{title:"Textarea",value:"textarea"}],F=[{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Description",key:"description"},{title:"Active",key:"is_active"},{title:"Actions",key:"actions"}],V=async()=>{f.value=!0;try{const s=O("accessToken").value;if(!s){console.error("Access token is not available");return}const{data:i}=await k.get("/api/admin/form-types",{headers:{Authorization:`Bearer ${s}`,Accept:"application/json"}});C.value=i}catch(s){console.error(s)}finally{f.value=!1}},x=()=>{o.value={name:"",description:"",fields:[],is_active:!0},n.value=!0},w=s=>{o.value={...s},n.value=!0},A=async()=>{try{o.value.id?await k.put(`/api/admin/form-types/${o.value.id}`,o.value,{headers:{Authorization:`Bearer ${u}`,Accept:"application/json"}}):await k.post("/api/admin/form-types",o.value,{headers:{Authorization:`Bearer ${u}`,Accept:"application/json"}}),n.value=!1,V()}catch(s){console.error(s)}},S=async s=>{try{await k.delete(`/api/admin/form-types/${s}`,{headers:{Authorization:`Bearer ${u}`,Accept:"application/json"}}),V()}catch(i){console.error(i)}},U=async s=>{try{await k.put(`/api/admin/form-types/${s.id}`,{is_active:s.is_active,headers:{Authorization:`Bearer ${u}`,Accept:"application/json"}})}catch(i){console.error(i)}},$=()=>{o.value.fields.push({name:"",type:"text",label:""})},B=s=>{o.value.fields.splice(s,1)};return Ve(()=>{V()}),(s,i)=>{const d=oe,p=te;return I(),X(G,null,{default:a(()=>[e(h,{cols:"12"},{default:a(()=>[e(N,null,{default:a(()=>[e(j,null,{default:a(()=>[e(v,{color:"primary",onClick:x},{default:a(()=>[y(" Add Form Type ")]),_:1})]),_:1}),e(L,null,{default:a(()=>[e(be,{headers:F,items:C.value,loading:f.value},{"item.is_active":a(({item:l})=>[e(H,{modelValue:l.is_active,"onUpdate:modelValue":r=>l.is_active=r,onChange:r=>U(l)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),"item.actions":a(({item:l})=>[e(v,{icon:"",size:"small",color:"primary",variant:"text",onClick:r=>w(l)},{default:a(()=>[e(g,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(v,{icon:"",size:"small",color:"error",variant:"text",onClick:r=>S(l.id)},{default:a(()=>[e(g,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:2},1032,["items","loading"])]),_:1})]),_:1})]),_:1}),e(Te,{modelValue:n.value,"onUpdate:modelValue":i[3]||(i[3]=l=>n.value=l),"max-width":"800"},{default:a(()=>[e(N,null,{default:a(()=>[e(j,null,{default:a(()=>[y(_e(o.value.id?"Edit":"Add")+" Form Type",1)]),_:1}),e(L,null,{default:a(()=>[e(le,{onSubmit:ye(A,["prevent"])},{default:a(()=>[e(d,{modelValue:o.value.name,"onUpdate:modelValue":i[0]||(i[0]=l=>o.value.name=l),label:"Name",class:"mb-4"},null,8,["modelValue"]),e(p,{modelValue:o.value.description,"onUpdate:modelValue":i[1]||(i[1]=l=>o.value.description=l),label:"Description",class:"mb-4"},null,8,["modelValue"]),e(H,{modelValue:o.value.is_active,"onUpdate:modelValue":i[2]||(i[2]=l=>o.value.is_active=l),label:"Active",class:"mb-4"},null,8,["modelValue"]),e(N,{class:"mb-4"},{default:a(()=>[e(j,null,{default:a(()=>[y("Fields")]),_:1}),e(L,null,{default:a(()=>[(I(!0),ke(J,null,he(o.value.fields,(l,r)=>(I(),X(G,{key:r,class:"mb-4"},{default:a(()=>[e(h,{cols:"12",md:"4"},{default:a(()=>[e(d,{modelValue:l.name,"onUpdate:modelValue":c=>l.name=c,label:"Field Name"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"12",md:"4"},{default:a(()=>[e(ge,{modelValue:l.type,"onUpdate:modelValue":c=>l.type=c,items:T,label:"Field Type"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"12",md:"3"},{default:a(()=>[e(d,{modelValue:l.label,"onUpdate:modelValue":c=>l.label=c,label:"Field Label"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"12",md:"1"},{default:a(()=>[e(v,{icon:"",color:"error",variant:"text",onClick:c=>B(r)},{default:a(()=>[e(g,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),e(v,{onClick:$,color:"primary"},{default:a(()=>[e(g,{icon:"tabler-plus",start:""}),y(" Add Field ")]),_:1})]),_:1})]),_:1}),e(v,{type:"submit",color:"primary"},{default:a(()=>[y(" Save ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{Je as default};
