import{_ as de}from"./AppTextarea-DbTzv2XX.js";import{V as pe,_ as me}from"./VForm-Div2171k.js";import{a6 as fe,b6 as Y,a8 as ve,ap as Ve,a9 as ye,L as y,b7 as E,r as v,w as ke,ab as he,aW as be,b as t,p as D,F as T,aS as Ce,b8 as ge,ad as L,D as Pe,f as O,e as i,o as W,a3 as z,s as B,t as q,x as _e,$ as G,a2 as Ie}from"./main-BaaxU7u_.js";import{a as $}from"./axios-DGDcxXwr.js";import{V as H,a as U}from"./VRow-DWkoVhRZ.js";import{V as J,b as K}from"./VCard-qOwQnKaN.js";import{V as Q}from"./VCardText-DHqodwx9.js";import{V as Ae}from"./VDataTable--edFkA1N.js";import{V as we}from"./VImg-CsLNaE2M.js";import{m as Se,a as Fe,u as ze,V as X,f as Be,b as $e,c as xe}from"./VTextField-DX4T_R8n.js";import{f as Re}from"./forwardRefs-DWGaNmQL.js";import{V as De}from"./VChip-CcYLCn_t.js";import{V as Te}from"./VDialog-DkWi3ux5.js";/* empty css              */import"./VAvatar-fH7oXIj0.js";import"./VList-BMN_Y16l.js";import"./VDivider-UFgmqBFa.js";import"./VOverlay-5QeYpmUP.js";import"./scopeId-BisKJNJb.js";import"./VMenu-62ETFCUt.js";import"./VCheckboxBtn-ChYJ_Ojh.js";import"./VSelectionControl-cya76OLo.js";const Ue=fe({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...Se({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>Y(e).every(V=>V!=null&&typeof V=="object")},...Fe({clearable:!0})},"VFileInput"),Me=ve()({name:"VFileInput",inheritAttrs:!1,props:Ue(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,V){let{attrs:h,emit:p,slots:l}=V;const{t:m}=Ve(),s=ye(e,"modelValue",e.modelValue,a=>Y(a),a=>e.multiple||Array.isArray(e.modelValue)?a:a[0]??null),{isFocused:d,focus:x,blur:b}=ze(e),I=y(()=>typeof e.showSize!="boolean"?e.showSize:void 0),A=y(()=>(s.value??[]).reduce((a,r)=>{let{size:g=0}=r;return a+g},0)),w=y(()=>E(A.value,I.value)),C=y(()=>(s.value??[]).map(a=>{const{name:r="",size:g=0}=a;return e.showSize?`${r} (${E(g,I.value)})`:r})),n=y(()=>{var r;const a=((r=s.value)==null?void 0:r.length)??0;return e.showSize?m(e.counterSizeString,a,w.value):m(e.counterString,a)}),u=v(),k=v(),c=v(),o=y(()=>d.value||e.active),S=y(()=>["plain","underlined"].includes(e.variant));function R(){var a;c.value!==document.activeElement&&((a=c.value)==null||a.focus()),d.value||x()}function Z(a){var r;(r=c.value)==null||r.click()}function ee(a){p("mousedown:control",a)}function te(a){var r;(r=c.value)==null||r.click(),p("click:control",a)}function le(a){a.stopPropagation(),R(),Ce(()=>{s.value=[],ge(e["onClick:clear"],a)})}return ke(s,a=>{(!Array.isArray(a)||!a.length)&&c.value&&(c.value.value="")}),he(()=>{const a=!!(l.counter||e.counter),r=!!(a||l.details),[g,ae]=be(h),{modelValue:Ne,...oe}=X.filterProps(e),ne=Be(e);return t(X,D({ref:u,modelValue:s.value,"onUpdate:modelValue":P=>s.value=P,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":S.value},e.class],style:e.style,"onClick:prepend":Z},g,oe,{centerAffix:!S.value,focused:d.value}),{...l,default:P=>{let{id:F,isDisabled:_,isDirty:M,isReadonly:N,isValid:ie}=P;return t($e,D({ref:k,"prepend-icon":e.prependIcon,onMousedown:ee,onClick:te,"onClick:clear":le,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ne,{id:F.value,active:o.value||M.value,dirty:M.value||e.dirty,disabled:_.value,focused:d.value,error:ie.value===!1}),{...l,default:ue=>{var j;let{props:{class:re,...se}}=ue;return t(T,null,[t("input",D({ref:c,type:"file",readonly:N.value,disabled:_.value,multiple:e.multiple,name:e.name,onClick:f=>{f.stopPropagation(),N.value&&f.preventDefault(),R()},onChange:f=>{if(!f.target)return;const ce=f.target;s.value=[...ce.files??[]]},onFocus:R,onBlur:b},se,ae),null),t("div",{class:re},[!!((j=s.value)!=null&&j.length)&&!e.hideInput&&(l.selection?l.selection({fileNames:C.value,totalBytes:A.value,totalBytesReadable:w.value}):e.chips?C.value.map(f=>t(De,{key:f,size:"small",text:f},null)):C.value.join(", "))])])}})},details:r?P=>{var F,_;return t(T,null,[(F=l.details)==null?void 0:F.call(l,P),a&&t(T,null,[t("span",null,null),t(xe,{active:!!((_=s.value)!=null&&_.length),value:n.value,disabled:e.disabled},l.counter)])])}:void 0})}),Re({},u,k,c)}}),rt={__name:"index",setup(e){const V=v([]),h=v(!1),p=v(!1),l=v({title:"",description:"",price:0,stock:0,photo:null}),m=v(null),s=[{title:"ID",key:"id"},{title:"Title",key:"title"},{title:"Price",key:"price"},{title:"Stock",key:"stock"},{title:"Photo",key:"photo"},{title:"Actions",key:"actions"}],d=L("accessToken").value,x=L("userRoles").value;console.log(x);const b=async()=>{h.value=!0;try{const{data:n}=await $.get("/api/products",{headers:{Authorization:`Bearer ${d}`,Accept:"application/json"}});V.value=n}catch(n){console.error(n)}finally{h.value=!1}},I=()=>{l.value={title:"",description:"",price:0,stock:0,photo:null},m.value=null,p.value=!0},A=n=>{l.value={...n},p.value=!0},w=async()=>{try{const n=new FormData;n.append("title",l.value.title),n.append("description",l.value.description),n.append("price",l.value.price),n.append("stock",l.value.stock),m.value&&n.append("photo",m.value),l.value.id?await $.put(`/api/products/${l.value.id}`,n,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${d}`}}):await $.post("/api/products",n,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${d}`}}),p.value=!1,b()}catch(n){console.error(n)}},C=async n=>{try{await $.delete(`/api/products/${n}`,{headers:{Authorization:`Bearer ${d}`,Accept:"application/json"}}),b()}catch(u){console.error(u)}};return Pe(()=>{b()}),(n,u)=>{const k=me,c=de;return W(),O(H,null,{default:i(()=>[t(U,{cols:"12"},{default:i(()=>[t(J,null,{default:i(()=>[t(K,null,{default:i(()=>[t(z,{color:"primary",onClick:I},{default:i(()=>[B(" Add Product ")]),_:1})]),_:1}),t(Q,null,{default:i(()=>[t(Ae,{headers:s,items:V.value,loading:h.value},{"item.price":i(({item:o})=>[B(q(o.price)+" â‚¬ ",1)]),"item.photo":i(({item:o})=>[o.photo?(W(),O(we,{key:0,src:`/storage/${o.photo}`,width:"50",height:"50",cover:""},null,8,["src"])):_e("",!0)]),"item.actions":i(({item:o})=>[t(z,{icon:"",size:"small",color:"primary",variant:"text",onClick:S=>A(o)},{default:i(()=>[t(G,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),t(z,{icon:"",size:"small",color:"error",variant:"text",onClick:S=>C(o.id)},{default:i(()=>[t(G,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:2},1032,["items","loading"])]),_:1})]),_:1})]),_:1}),t(Te,{modelValue:p.value,"onUpdate:modelValue":u[5]||(u[5]=o=>p.value=o),"max-width":"800"},{default:i(()=>[t(J,null,{default:i(()=>[t(K,null,{default:i(()=>[B(q(l.value.id?"Edit":"Add")+" Product",1)]),_:1}),t(Q,null,{default:i(()=>[t(pe,{onSubmit:Ie(w,["prevent"])},{default:i(()=>[t(k,{modelValue:l.value.title,"onUpdate:modelValue":u[0]||(u[0]=o=>l.value.title=o),label:"Title",class:"mb-4"},null,8,["modelValue"]),t(c,{modelValue:l.value.description,"onUpdate:modelValue":u[1]||(u[1]=o=>l.value.description=o),label:"Description",class:"mb-4"},null,8,["modelValue"]),t(H,{class:"mb-4"},{default:i(()=>[t(U,{cols:"12",md:"6"},{default:i(()=>[t(k,{modelValue:l.value.price,"onUpdate:modelValue":u[2]||(u[2]=o=>l.value.price=o),label:"Price",type:"number",min:"0",step:"0.01"},null,8,["modelValue"])]),_:1}),t(U,{cols:"12",md:"6"},{default:i(()=>[t(k,{modelValue:l.value.stock,"onUpdate:modelValue":u[3]||(u[3]=o=>l.value.stock=o),label:"Stock",type:"number",min:"0"},null,8,["modelValue"])]),_:1})]),_:1}),t(Me,{modelValue:m.value,"onUpdate:modelValue":u[4]||(u[4]=o=>m.value=o),label:"Product Image",accept:"image/*","prepend-icon":"tabler-camera",class:"mb-4"},null,8,["modelValue"]),t(z,{type:"submit",color:"primary"},{default:i(()=>[B(" Save ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{rt as default};
