import{V as U,_ as j}from"./VForm-Div2171k.js";import{a6 as E,a7 as J,a8 as O,a9 as $,aa as W,L as z,ab as G,aW as q,b as e,p as L,r as g,o as R,c as H,d as l,m as a,t as I,e as s,s as h,a2 as K,f as Q,x as X,a3 as Y,F as Z,j as ee,a as ae,E as P,ad as _}from"./main-BaaxU7u_.js";import{u as B,a as se,b as te}from"./misc-mask-light-CAoH_xaN.js";import{V as oe,a as le,b as re,c as ne,d as ie}from"./VAlert-C2TAWkQ5.js";import{V as ue}from"./VNodeRenderer-BiZxuysH.js";import{a as de}from"./axios-DGDcxXwr.js";import{a as m,V as D}from"./VRow-DWkoVhRZ.js";import{V as ce}from"./VImg-CsLNaE2M.js";import{V as me}from"./VCard-qOwQnKaN.js";import{V as F}from"./VCardText-DHqodwx9.js";import{m as pe,V as N}from"./VCheckboxBtn-ChYJ_Ojh.js";import{m as fe,u as Ve,V as T}from"./VTextField-DX4T_R8n.js";import"./forwardRefs-DWGaNmQL.js";import"./VAvatar-fH7oXIj0.js";/* empty css              */import"./VSelectionControl-cya76OLo.js";const he=E({...fe(),...J(pe(),["inline"])},"VCheckbox"),ge=O()({name:"VCheckbox",inheritAttrs:!1,props:he(),emits:{"update:modelValue":r=>!0,"update:focused":r=>!0},setup(r,b){let{attrs:n,slots:d}=b;const i=$(r,"modelValue"),{isFocused:p,focus:k,blur:v}=Ve(r),x=W(),f=z(()=>r.id||`checkbox-${x}`);return G(()=>{const[t,u]=q(n),c=T.filterProps(r),o=N.filterProps(r);return e(T,L({class:["v-checkbox",r.class]},t,c,{modelValue:i.value,"onUpdate:modelValue":V=>i.value=V,id:f.value,focused:p.value,style:r.style}),{...d,default:V=>{let{id:y,messagesId:C,isDisabled:w,isReadonly:S,isValid:A}=V;return e(N,L(o,{id:y.value,"aria-describedby":C.value,disabled:w.value,readonly:S.value},u,{error:A.value===!1,modelValue:i.value,"onUpdate:modelValue":M=>i.value=M,onFocus:k,onBlur:v}),d)}})}),{}}}),_e={href:"javascript:void(0)"},be={class:"auth-logo d-flex align-center gap-x-3"},ke={class:"auth-title"},ve={class:"position-relative bg-background w-100 me-0"},xe={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"6.25rem"}},ye=["src"],Ce={class:"text-h4 mb-1"},we={class:"text-capitalize"},Ie=l("p",{class:"mb-0"},"Please sign-in to your account",-1),Pe={class:"d-flex align-center flex-wrap justify-space-between my-6"},Le=l("span",{class:"d-inline-block"}," Don't have an account? ",-1),ze={__name:"login",setup(r){const b=ee(),n=g({email:"",password:"",remember:!1}),d=g(!1),i=g(""),p=g(!1),k=B(ie,ne,re,le,!0),v=B(te,se),x=async()=>{var f,t;p.value=!0,i.value="";try{const{data:u}=await de.post("/api/login",{email:n.value.email,password:n.value.password}),{access_token:c,user:o}=u,V=_("accessToken"),y=_("userData"),C=_("userRoles"),w=_("userPermissions");V.value=c,y.value=JSON.stringify(o),C.value=JSON.stringify(o.role||[]),w.value=JSON.stringify(o.permissions||[]),localStorage.setItem("userRole",o.role),localStorage.setItem("accessToken",c),b.push("/dashboard")}catch(u){i.value=((t=(f=u.response)==null?void 0:f.data)==null?void 0:t.message)||"Login failed"}finally{p.value=!1}};return(f,t)=>{const u=j,c=ae("RouterLink");return R(),H(Z,null,[l("a",_e,[l("div",be,[e(a(ue),{nodes:a(P).app.logo},null,8,["nodes"]),l("h1",ke,I(a(P).app.title),1)])]),e(D,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:s(()=>[e(m,{md:"8",class:"d-none d-md-flex"},{default:s(()=>[l("div",ve,[l("div",xe,[e(ce,{"max-width":"613",src:a(k),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),l("img",{class:"auth-footer-mask flip-in-rtl",src:a(v),alt:"auth-footer-mask",height:"280",width:"100"},null,8,ye)])]),_:1}),e(m,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:s(()=>[e(me,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-6"},{default:s(()=>[e(F,null,{default:s(()=>[l("h4",Ce,[h(" Welcome to "),l("span",we,I(a(P).app.title),1),h("! 👋🏻 ")]),Ie]),_:1}),e(F,null,{default:s(()=>[e(U,{onSubmit:K(x,["prevent"])},{default:s(()=>[e(D,null,{default:s(()=>[e(m,{cols:"12"},{default:s(()=>[a(i)?(R(),Q(oe,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:s(()=>[h(I(a(i)),1)]),_:1})):X("",!0)]),_:1}),e(m,{cols:"12"},{default:s(()=>[e(u,{modelValue:a(n).email,"onUpdate:modelValue":t[0]||(t[0]=o=>a(n).email=o),autofocus:"",label:"Email",type:"email",placeholder:"admin@example.com"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:s(()=>[e(u,{modelValue:a(n).password,"onUpdate:modelValue":t[1]||(t[1]=o=>a(n).password=o),label:"Password",placeholder:"············",type:a(d)?"text":"password","append-inner-icon":a(d)?"tabler-eye-off":"tabler-eye","onClick:appendInner":t[2]||(t[2]=o=>d.value=!a(d))},null,8,["modelValue","type","append-inner-icon"]),l("div",Pe,[e(ge,{modelValue:a(n).remember,"onUpdate:modelValue":t[3]||(t[3]=o=>a(n).remember=o),label:"Remember me"},null,8,["modelValue"])]),e(Y,{block:"",type:"submit",loading:a(p)},{default:s(()=>[h(" Login ")]),_:1},8,["loading"])]),_:1}),e(m,{cols:"12",class:"text-body-1 text-center"},{default:s(()=>[Le,e(c,{class:"text-primary ms-1 d-inline-block text-body-1",to:"/register"},{default:s(()=>[h(" Create account ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{ze as default};
