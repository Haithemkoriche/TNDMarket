import{_ as te}from"./AppTextarea-B2vjwZ3z.js";import{_ as le}from"./AppTextField-C9i3rMo7.js";import{a6 as oe,a8 as ie,a9 as R,av as se,r as b,aw as ne,L as E,aa as re,ab as ue,ax as de,b as e,p as O,F as Q,ay as ce,az as me,$ as g,aA as pe,au as ve,ad as W,D as fe,f as q,o as I,e as a,a3 as v,s as y,t as Ve,a2 as _e,c as ye,h as ke}from"./main-Dc8fLLio.js";import{a as k}from"./axios-DGDcxXwr.js";import{V as N,b as j}from"./VCard-CkB6CIXi.js";import{V as L}from"./VCardText-DxD8k5-8.js";import{V as he}from"./VDataTable-CnUCRCFb.js";import{m as be,u as ge,V as G}from"./VTextField-BtIlFlGn.js";import{m as Ce,V as H}from"./VSelectionControl-B1Qq_A9U.js";import{a as h,V as J}from"./VRow-TywjCKkg.js";import{V as we}from"./VForm-BF-thogD.js";import{V as Ae}from"./VDialog-B0k7aTaW.js";import{V as xe}from"./VSelect-CFNDzyn7.js";import"./VTextarea-CYzPfUum.js";import"./forwardRefs-DWGaNmQL.js";import"./VImg-BDT53czw.js";import"./VAvatar-CuFlpItv.js";import"./VPagination-tEoifavA.js";import"./VCheckboxBtn-DoNR63xf.js";import"./VChip-DXfzaw2X.js";import"./VDivider-D6pnG8a5.js";/* empty css              */import"./VOverlay-C_apeV14.js";import"./scopeId-CyTsLL5x.js";import"./VList-DJa-ehqo.js";import"./VMenu-Bs42EHWd.js";const Fe=oe({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...be(),...Ce()},"VSwitch"),K=ie()({name:"VSwitch",inheritAttrs:!1,props:Fe(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,C){let{attrs:f,slots:n}=C;const o=R(t,"indeterminate"),u=R(t,"modelValue"),{loaderClasses:x}=se(t),{isFocused:F,focus:V,blur:T}=ge(t),w=b(),A=ne&&window.matchMedia("(forced-colors: active)").matches,S=E(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),$=re(),B=E(()=>t.id||`switch-${$}`);function U(){o.value&&(o.value=!1)}function s(i){var d,p;i.stopPropagation(),i.preventDefault(),(p=(d=w.value)==null?void 0:d.input)==null||p.click()}return ue(()=>{const[i,d]=de(f),p=G.filterProps(t),l=H.filterProps(t);return e(G,O({class:["v-switch",{"v-switch--flat":t.flat},{"v-switch--inset":t.inset},{"v-switch--indeterminate":o.value},x.value,t.class]},i,p,{modelValue:u.value,"onUpdate:modelValue":r=>u.value=r,id:B.value,focused:F.value,style:t.style}),{...n,default:r=>{let{id:c,messagesId:X,isDisabled:Y,isReadonly:Z,isValid:M}=r;const z={model:u,isValid:M};return e(H,O({ref:w},l,{modelValue:u.value,"onUpdate:modelValue":[_=>u.value=_,U],id:c.value,"aria-describedby":X.value,type:"checkbox","aria-checked":o.value?"mixed":void 0,disabled:Y.value,readonly:Z.value,onFocus:V,onBlur:T},d),{...n,default:_=>{let{backgroundColorClasses:D,backgroundColorStyles:m}=_;return e("div",{class:["v-switch__track",A?void 0:D.value],style:m.value,onClick:s},[n["track-true"]&&e("div",{key:"prepend",class:"v-switch__track-true"},[n["track-true"](z)]),n["track-false"]&&e("div",{key:"append",class:"v-switch__track-false"},[n["track-false"](z)])])},input:_=>{let{inputNode:D,icon:m,backgroundColorClasses:ee,backgroundColorStyles:ae}=_;return e(Q,null,[D,e("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":m||t.loading},t.inset||A?void 0:ee.value],style:t.inset?void 0:ae.value},[n.thumb?e(ce,{defaults:{VIcon:{icon:m,size:"x-small"}}},{default:()=>[n.thumb({...z,icon:m})]}):e(me,null,{default:()=>[t.loading?e(pe,{name:"v-switch",active:!0,color:M.value===!1?void 0:S.value},{default:P=>n.loader?n.loader(P):e(ve,{active:P.isActive,color:P.color,indeterminate:!0,size:"16",width:"2"},null)}):m&&e(g,{key:String(m),icon:m,size:"x-small"},null)]})])])}})}})}),{}}}),ea={__name:"index",setup(t){const C=b([]),f=b(!1),n=b(!1),o=b({name:"",description:"",fields:[],is_active:!0}),u=W("accessToken").value,x=[{title:"Text",value:"text"},{title:"Number",value:"number"},{title:"Textarea",value:"textarea"}],F=[{title:"ID",key:"id"},{title:"Name",key:"name"},{title:"Description",key:"description"},{title:"Active",key:"is_active"},{title:"Actions",key:"actions"}],V=async()=>{f.value=!0;try{const s=W("accessToken").value;if(!s){console.error("Access token is not available");return}const{data:i}=await k.get("/api/admin/form-types",{headers:{Authorization:`Bearer ${s}`,Accept:"application/json"}});C.value=i}catch(s){console.error(s)}finally{f.value=!1}},T=()=>{o.value={name:"",description:"",fields:[],is_active:!0},n.value=!0},w=s=>{o.value={...s},n.value=!0},A=async()=>{try{o.value.id?await k.put(`/api/admin/form-types/${o.value.id}`,o.value,{headers:{Authorization:`Bearer ${u}`,Accept:"application/json"}}):await k.post("/api/admin/form-types",o.value,{headers:{Authorization:`Bearer ${u}`,Accept:"application/json"}}),n.value=!1,V()}catch(s){console.error(s)}},S=async s=>{try{await k.delete(`/api/admin/form-types/${s}`,{headers:{Authorization:`Bearer ${u}`,Accept:"application/json"}}),V()}catch(i){console.error(i)}},$=async s=>{try{await k.put(`/api/admin/form-types/${s.id}`,{is_active:s.is_active,headers:{Authorization:`Bearer ${u}`,Accept:"application/json"}})}catch(i){console.error(i)}},B=()=>{o.value.fields.push({name:"",type:"text",label:""})},U=s=>{o.value.fields.splice(s,1)};return fe(()=>{V()}),(s,i)=>{const d=le,p=te;return I(),q(J,null,{default:a(()=>[e(h,{cols:"12"},{default:a(()=>[e(N,null,{default:a(()=>[e(j,null,{default:a(()=>[e(v,{color:"primary",onClick:T},{default:a(()=>[y(" Add Form Type ")]),_:1})]),_:1}),e(L,null,{default:a(()=>[e(he,{headers:F,items:C.value,loading:f.value},{"item.is_active":a(({item:l})=>[e(K,{modelValue:l.is_active,"onUpdate:modelValue":r=>l.is_active=r,onChange:r=>$(l)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),"item.actions":a(({item:l})=>[e(v,{icon:"",size:"small",color:"primary",variant:"text",onClick:r=>w(l)},{default:a(()=>[e(g,{icon:"tabler-edit"})]),_:2},1032,["onClick"]),e(v,{icon:"",size:"small",color:"error",variant:"text",onClick:r=>S(l.id)},{default:a(()=>[e(g,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:2},1032,["items","loading"])]),_:1})]),_:1})]),_:1}),e(Ae,{modelValue:n.value,"onUpdate:modelValue":i[3]||(i[3]=l=>n.value=l),"max-width":"800"},{default:a(()=>[e(N,null,{default:a(()=>[e(j,null,{default:a(()=>[y(Ve(o.value.id?"Edit":"Add")+" Form Type",1)]),_:1}),e(L,null,{default:a(()=>[e(we,{onSubmit:_e(A,["prevent"])},{default:a(()=>[e(d,{modelValue:o.value.name,"onUpdate:modelValue":i[0]||(i[0]=l=>o.value.name=l),label:"Name",class:"mb-4"},null,8,["modelValue"]),e(p,{modelValue:o.value.description,"onUpdate:modelValue":i[1]||(i[1]=l=>o.value.description=l),label:"Description",class:"mb-4"},null,8,["modelValue"]),e(K,{modelValue:o.value.is_active,"onUpdate:modelValue":i[2]||(i[2]=l=>o.value.is_active=l),label:"Active",class:"mb-4"},null,8,["modelValue"]),e(N,{class:"mb-4"},{default:a(()=>[e(j,null,{default:a(()=>[y("Fields")]),_:1}),e(L,null,{default:a(()=>[(I(!0),ye(Q,null,ke(o.value.fields,(l,r)=>(I(),q(J,{key:r,class:"mb-4"},{default:a(()=>[e(h,{cols:"12",md:"4"},{default:a(()=>[e(d,{modelValue:l.name,"onUpdate:modelValue":c=>l.name=c,label:"Field Name"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"12",md:"4"},{default:a(()=>[e(xe,{modelValue:l.type,"onUpdate:modelValue":c=>l.type=c,items:x,label:"Field Type"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"12",md:"3"},{default:a(()=>[e(d,{modelValue:l.label,"onUpdate:modelValue":c=>l.label=c,label:"Field Label"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(h,{cols:"12",md:"1"},{default:a(()=>[e(v,{icon:"",color:"error",variant:"text",onClick:c=>U(r)},{default:a(()=>[e(g,{icon:"tabler-trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),e(v,{onClick:B,color:"primary"},{default:a(()=>[e(g,{icon:"tabler-plus",start:""}),y(" Add Field ")]),_:1})]),_:1})]),_:1}),e(v,{type:"submit",color:"primary"},{default:a(()=>[y(" Save ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{ea as default};
