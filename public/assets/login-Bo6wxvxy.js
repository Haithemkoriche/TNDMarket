import{_ as B}from"./AppTextField-C9i3rMo7.js";import{r as p,o as b,c as D,d as l,b as e,m as a,t as h,e as t,s as m,a2 as S,f as j,x as M,a3 as P,F,j as E,a as J,E as V,ad as f}from"./main-Dc8fLLio.js";import{u as k,a as O,b as U}from"./misc-mask-light-BaaOCwLJ.js";import{a as A,b as $,c as z,d as G}from"./auth-v2-login-illustration-light-CCv0yH6T.js";import{V as W}from"./VNodeRenderer-B3FOMZkX.js";import{a as q}from"./axios-DGDcxXwr.js";import{a as i,V as x}from"./VRow-TywjCKkg.js";import{V as H}from"./VImg-BDT53czw.js";import{V as K}from"./VCard-CkB6CIXi.js";import{V as v}from"./VCardText-DxD8k5-8.js";import{V as Q}from"./VForm-BF-thogD.js";import{V as X}from"./VAlert-MFaUqgLV.js";import{V as Y}from"./VCheckbox-BwRcH4vJ.js";import"./VTextField-BtIlFlGn.js";import"./forwardRefs-DWGaNmQL.js";/* empty css              */import"./VAvatar-CuFlpItv.js";import"./VCheckboxBtn-DoNR63xf.js";import"./VSelectionControl-B1Qq_A9U.js";const Z={href:"javascript:void(0)"},ee={class:"auth-logo d-flex align-center gap-x-3"},ae={class:"auth-title"},te={class:"position-relative bg-background w-100 me-0"},se={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"6.25rem"}},oe=["src"],le={class:"text-h4 mb-1"},re={class:"text-capitalize"},ne=l("p",{class:"mb-0"},"Please sign-in to your account",-1),ie={class:"d-flex align-center flex-wrap justify-space-between my-6"},me=l("span",{class:"d-inline-block"}," Don't have an account? ",-1),Te={__name:"login",setup(de){const y=E(),r=p({email:"",password:"",remember:!1}),d=p(!1),u=p(""),_=p(!1),w=k(G,z,$,A,!0),C=k(U,O),L=async()=>{var g,s;_.value=!0,u.value="";try{const{data:n}=await q.post("/api/login",{email:r.value.email,password:r.value.password}),{access_token:c,user:o}=n,I=f("accessToken"),R=f("userData"),N=f("userRoles"),T=f("userPermissions");I.value=c,R.value=JSON.stringify(o),N.value=JSON.stringify(o.role||[]),T.value=JSON.stringify(o.permissions||[]),localStorage.setItem("userRole",o.role),localStorage.setItem("accessToken",c),y.push("/dashboard")}catch(n){u.value=((s=(g=n.response)==null?void 0:g.data)==null?void 0:s.message)||"Login failed"}finally{_.value=!1}};return(g,s)=>{const n=B,c=J("RouterLink");return b(),D(F,null,[l("a",Z,[l("div",ee,[e(a(W),{nodes:a(V).app.logo},null,8,["nodes"]),l("h1",ae,h(a(V).app.title),1)])]),e(x,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:t(()=>[e(i,{md:"8",class:"d-none d-md-flex"},{default:t(()=>[l("div",te,[l("div",se,[e(H,{"max-width":"613",src:a(w),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),l("img",{class:"auth-footer-mask flip-in-rtl",src:a(C),alt:"auth-footer-mask",height:"280",width:"100"},null,8,oe)])]),_:1}),e(i,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:t(()=>[e(K,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-6"},{default:t(()=>[e(v,null,{default:t(()=>[l("h4",le,[m(" Welcome to "),l("span",re,h(a(V).app.title),1),m("!  ")]),ne]),_:1}),e(v,null,{default:t(()=>[e(Q,{onSubmit:S(L,["prevent"])},{default:t(()=>[e(x,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[a(u)?(b(),j(X,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:t(()=>[m(h(a(u)),1)]),_:1})):M("",!0)]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(n,{modelValue:a(r).email,"onUpdate:modelValue":s[0]||(s[0]=o=>a(r).email=o),autofocus:"",label:"Email",type:"email",placeholder:"admin@example.com"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(n,{modelValue:a(r).password,"onUpdate:modelValue":s[1]||(s[1]=o=>a(r).password=o),label:"Password",placeholder:"路路路路路路路路路路路路",type:a(d)?"text":"password","append-inner-icon":a(d)?"tabler-eye-off":"tabler-eye","onClick:appendInner":s[2]||(s[2]=o=>d.value=!a(d))},null,8,["modelValue","type","append-inner-icon"]),l("div",ie,[e(Y,{modelValue:a(r).remember,"onUpdate:modelValue":s[3]||(s[3]=o=>a(r).remember=o),label:"Remember me"},null,8,["modelValue"])]),e(P,{block:"",type:"submit",loading:a(_)},{default:t(()=>[m(" Login ")]),_:1},8,["loading"])]),_:1}),e(i,{cols:"12",class:"text-body-1 text-center"},{default:t(()=>[me,e(c,{class:"text-primary ms-1 d-inline-block text-body-1",to:"/register"},{default:t(()=>[m(" Create account ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{Te as default};
